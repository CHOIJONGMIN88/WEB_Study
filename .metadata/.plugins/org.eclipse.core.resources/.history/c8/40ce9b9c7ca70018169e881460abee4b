package com.ic.gallery;

import java.util.ArrayList;
import java.util.List;

import javax.servlet.ServletContext;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

import dao.PhotoDao;
import myconst.MyConstant;
import vo.PhotoVo;

@Controller
public class PhotoGalleryController {

	// DispatcherServlet에서 자동연결
		@Autowired
		ServletContext application;
		
		@Autowired
		HttpServletRequest request;
		
		@Autowired
		HttpSession  session;
	
	
	PhotoDao  photo_dao;

	public PhotoDao getPhoto_dao() {
		return photo_dao;
	}

	public void setPhoto_dao(PhotoDao photo_dao) {
		this.photo_dao = photo_dao;
	}
	
	//목록보기
	@RequestMapping("/photo/list.do")
	public String list(Model model) {
	
	List<PhotoVo> list = photo_dao.selectList();
	
	model.addAttribute("list",list);
	
	return  MyConstant.PhotoGalleryController.VIEW_PATH +  "photo_list.jsp";
	
	}
	
	@RequestMapping("/photo/insert_form.do")
	public String insert_form(Model model) {
	
	return  MyConstant.PhotoGalleryController.VIEW_PATH +  "photo_insert_form.jsp";
	
	}
	
	@RequestMapping("/photo/insert.do")
	public String insert(PhotoVo vo,Model model,HttpServletRequest request)throws Exception {
	
		vo.setIp(request.getRemoteAddr());
		
		String web_path="/resources/upload/";
		String abs_path=application.getRealPath(web_path);
		
		
		
		
		
	return  MyConstant.PhotoGalleryController.VIEW_PATH +  "photo_insert_form.jsp";
	
	}
	
	
	
	
	
}
